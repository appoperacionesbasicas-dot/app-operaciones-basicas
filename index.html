<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Operaciones Matemáticas</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f4f4f4; }
    .card { background:white; padding:20px; margin-bottom:20px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    label { font-weight:bold; }
    input { margin:5px 0 15px 0; padding:6px; width:100%; }
    button { padding:10px 15px; border:none; background:#007bff; color:white; cursor:pointer; border-radius:6px; }
    .operacion { padding:10px; background:#e9e9e9; margin:10px 0; border-radius:6px; }
  </style>
</head>
<body>
  <h1>Generador de Operaciones Matemáticas</h1>

  <div class="card" style="width:100%; margin-bottom:20px;">
    <h2>Parámetros</h2>

    <div style="display:flex; gap:20px; width:100%;">
      <!-- COLUMNA IZQUIERDA: Suma y Resta -->
      <div style="flex:1; min-width:200px;">
        <h3>Suma</h3>
        <label>Número de elementos:</label>
        <select id="sumCount"><option>1</option><option>2</option><option selected>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select>
        <label>Cifras por elemento:</label>
        <select id="sumDigits"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option selected>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select>

        <h3>Resta</h3>
        <label>Cifras por elemento:</label>
        <select id="resDigits"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option selected>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select>
      </div>

      <!-- COLUMNA DERECHA: Multiplicación -->
      <div style="flex:1; min-width:200px;">
        <h3>Multiplicación</h3>
        <label>Cifras multiplicando:</label>
        <select id="mulA"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option selected>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select>
        <label>Cifras multiplicador:</label>
        <select id="mulB"><option>1</option><option selected>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select>

        <h3>División</h3>
        <label>Cifras dividendo:</label>
        <select id="divA"><option>1</option><option>2</option><option>3</option><option>4</option><option selected>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select>
        <label>Cifras divisor:</label>
        <select id="divB"><option>1</option><option selected>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select>
      </div>
    </div>

    <button onclick="generarOperaciones()">Generar operaciones</button()">Generar operaciones</button>
    <button style="background:#28a745" onclick="recargarOperaciones()">Cargar desde JSON</button>
  </div>

  <div class="card" style="width:100%;">
    <h2>Operaciones generadas</h2>
    <div id="lista"></div>
  </div>

  <script>
    // Clave usada para almacenar y recuperar datos desde localStorage
    const LS_KEY = "operaciones_math";

    // Genera un número aleatorio con la cantidad de dígitos indicada
    function randomNumero(digits) {
      const min = Math.pow(10, digits - 1);
      const max = Math.pow(10, digits) - 1;
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // Genera una división exacta asegurando que el residuo sea 0
    function generarDivisionExacta(divA, divB) {
      const divisor = randomNumero(divB);
      const dividendo = randomNumero(divA);
      const cociente = Math.floor(dividendo / divisor);
      const residuo = dividendo % divisor;
      return { dividendo, divisor, cociente, residuo };
    }

    // Genera todas las operaciones matemáticas basadas en los parámetros seleccionados
    function generarOperaciones() {
      const sumCount = +document.getElementById('sumCount').value;
      const sumDigits = +document.getElementById('sumDigits').value;
      const resDigits = +document.getElementById('resDigits').value;
      const mulA = +document.getElementById('mulA').value;
      const mulB = +document.getElementById('mulB').value;
      const divA = +document.getElementById('divA').value;
      const divB = +document.getElementById('divB').value;

      let data = [];

      if(sumCount > 1 && sumDigits > 0){
        const elementos = Array.from({length: sumCount}, ()=> randomNumero(sumDigits));
        data.push({ tipo:"suma", elementos, resuelto:false, resultado: elementos.reduce((a,b)=>a+b,0) });
      }

      if(resDigits > 0){
        let a = randomNumero(resDigits), b = randomNumero(resDigits);
        if(a < b) [a,b] = [b,a];
        data.push({ tipo:"resta", a, b, resuelto:false, resultado: a - b });
      }

      if(mulA > 0 && mulB > 0){
        const A = randomNumero(mulA);
        const B = randomNumero(mulB);
        data.push({ tipo:"multiplicacion", A, B, resuelto:false, resultado: A * B });
      }

      if(divA > 0 && divB > 0){
        const d = generarDivisionExacta(divA, divB);
        data.push({ tipo:"division", ...d, resuelto:false });
      }

      localStorage.setItem(LS_KEY, JSON.stringify(data));
      console.log("JSON generado:", data);
      mostrar();
    }

    // Carga las operaciones desde el JSON guardado en localStorage
    function recargarOperaciones(){ mostrar(); }

    // Muestra las operaciones guardadas en pantalla
    function mostrar(){
      const cont = document.getElementById('lista');
      const data = JSON.parse(localStorage.getItem(LS_KEY) || "[]");
      cont.innerHTML = "";

      data.forEach(op => {
        let txt = "";
        if(op.tipo==="suma") txt = op.elementos.join(" + ");
        if(op.tipo==="resta") txt = `${op.a} - ${op.b}`;
        if(op.tipo==="multiplicacion") txt = `${op.A} × ${op.B}`;
        if(op.tipo==="division") txt = `${op.dividendo} ÷ ${op.divisor}`;

        cont.innerHTML += `<div class='operacion'><strong>${op.tipo.toUpperCase()}</strong><br>${txt}</div>`;
      });
    }

    mostrar();
  </script>
</body>
</html>
